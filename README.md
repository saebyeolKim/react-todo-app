# Docker-Study
ë¹„ì „ê³µìë„ ì´í•´í•  ìˆ˜ ìˆëŠ” Docker ì…ë¬¸/ì‹¤ì „

### :blossom: Docker ê¸°ë³¸ê°œë…
1-1. Docker ë¥¼ ë°°ìš°ëŠ” ì´ìœ 

> ì´ì‹ì„± : íŠ¹ì • í”„ë¡œê·¸ë¨ì„ ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì‰½ê²Œ ì˜®ê²¨ì„œ ì„¤ì¹˜ ë° ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” íŠ¹ì„±
> 
- ë§¤ë²ˆ ê·€ì°®ì€ **ì„¤ì¹˜ ê³¼ì •ì„ ì¼ì¼ì´ ê±°ì¹˜ì§€ ì•Šì•„ë„ ëœë‹¤.**
- **í•­ìƒ ì¼ê´€ë˜ê²Œ** í”„ë¡œê·¸ë¨ì„ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤. (ë²„ì „, í™˜ê²½ ì„¤ì •, ì˜µì…˜, ìš´ì˜ ì²´ì œ ë“±)
- ê° í”„ë¡œê·¸ë¨ì´ ë…ë¦½ì ì¸ í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— **í”„ë¡œê·¸ë¨ ê°„ì— ì„œë¡œ ì¶©ëŒì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.**

---

1-2. IP ì™€ Port ì˜ ê°œë…

ip : íŠ¹ì • ì»´í“¨í„°ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œ

port : í•œ ì»´í“¨í„° ë‚´ì—ì„œ ì‹¤í–‰ë˜ê³  ìˆëŠ” íŠ¹ì • í”„ë¡œê·¸ë¨ì˜ ì£¼ì†Œ

---

1-3. Docker ? Container ? Image ?

âœ…Docker : **ì»¨í…Œì´ë„ˆ**ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ê°ì˜ í”„ë¡œê·¸ë¨ì„ **ë¶„ë¦¬ëœ í™˜ê²½**ì—ì„œ ì‹¤í–‰ ë° ê´€ë¦¬

âœ…Container : ìœˆë„ìš° í™˜ê²½ì„ ì‚¬ìš©í•´ë³´ë©´ í•˜ë‚˜ì˜ ì»´í“¨í„°ì— ì—¬ëŸ¬ ì‚¬ìš©ìë¡œ ë‚˜ëˆ ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ì²˜ëŸ¼ í•˜ë‚˜ì˜ ì»´í“¨í„° í™˜ê²½ ë‚´ì—ì„œ ë…ë¦½ì ì¸ ì»´í“¨í„° í™˜ê²½ì„ êµ¬ì„±í•´ì„œ, ê° í™˜ê²½ì— í”„ë¡œê·¸ë¨ì„ ë³„ë„ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆê²Œ ë§Œë“  ê°œë…ì´ë‹¤. ì»¨í…Œì´ë„ˆëŠ” ì»´í“¨í„° ì•ˆì— ìˆëŠ” ë¯¸ë‹ˆ ì»´í“¨í„°ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

ì»¨í…Œì´ë„ˆì™€ ì»¨í…Œì´ë„ˆë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ì»´í“¨í„°ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì»¨í…Œì´ë„ˆë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” ì»´í“¨í„°ë¥¼í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°ë¼ê³  ë¶€ë¥¸ë‹¤.

ì»¨í…Œì´ë„ˆì˜ ë…ë¦½ì„± : ë””ìŠ¤í¬(ì €ì¥ ê³µê°„), ë„¤íŠ¸ì›Œí¬(IP, Port) ë¥¼ ê°ê° ê°€ì§€ê³  ìˆë‹¤.

âœ…image : ë‹Œí…ë„ì˜ ê²Œì„ ì¹©ê³¼ ê°™ì€ ì—­í• ì´ image ì´ë‹¤. 

---

1-4. Docker ì „ì²´ íë¦„ ëŠê»´ë³´ê¸°

docker ì— nginx ì„¤ì¹˜
![image](https://github.com/user-attachments/assets/4d524299-e851-480d-8116-43e86d659536)


ì›¹ì„œë²„ ì‹¤í–‰ í™•ì¸
![image (1)](https://github.com/user-attachments/assets/aa7db88a-2950-463b-8e0f-69321b6c6005)
![image (2)](https://github.com/user-attachments/assets/49fa4f25-574f-4ccd-997e-8ce60054dbb8)

ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
![image (3)](https://github.com/user-attachments/assets/697d2bd6-c0e8-4196-a9d2-5b8be0f2c5d2)

---
### :seedling: Docker CLI ìµíˆê¸°
2-1 ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ, ì¡°íšŒ/ì‚­ì œ
* docker pull ~ : ì´ë¯¸ì§€ ë‹¤ìš´ë°›ê¸°
* docker image ls : ë‹¤ìš´ë°›ì€ ì´ë¯¸ì§€ ëª©ë¡ë³´ê¸° ë§Œì•½ Docker ì´ë¯¸ì§€ì˜ íŠ¹ì • íƒœê·¸ë¥¼ ì •í•´ ë‹¤ìš´ë°›ê³  ì‹¶ë‹¤ë©´ docker hub ì—ì„œ í™•ì¸í•˜ë©´ ëœë‹¤.
* docker image rm IMAGE ID ì˜ ì¼ë¶€ : ì´ë¯¸ì§€ ì‚­ì œ
* docker image rm -f IMAGE ID ì˜ ì¼ë¶€ : ì´ë¯¸ì§€ ê°•ì œ ì‚­ì œ
Error response from daemon: conflict: unable to delete 2e2da08a061a (must be forced) - image is being used by stopped container 8fe5fe329026
* docker image rm $(docker images -q) : ì»¨í…Œì´ë„ˆì—ì„œ ì‚¬ìš©í•˜ê³  ìˆì§€ ì•Šì€ ì „ì²´ ì´ë¯¸ì§€ ì‚­ì œ
* docker image rm -f $(docker images -q) : ì¤‘ë‹¨ëœ ì»¨í…Œì´ë„ˆì—ì„œ ì‚¬ìš©í•˜ê³  ìˆì§€ ì•Šì€ ì „ì²´ ì´ë¯¸ì§€ ì‚­ì œ
* docker image rm ID ì˜ ì¼ë¶€ ID ì˜ ì¼ë¶€ : ì—¬ëŸ¬ê°œì˜ id ì‚­ì œ
---
2-2 ì»¨í…Œì´ë„ˆ ìƒì„±/ì‹¤í–‰
```
docker create nginx : ì»¨í…Œì´ë„ˆ (ë¯¸ë‹ˆì»´í“¨í„°) ìƒì„±
docker ps -a : ìƒì„±ëœ ì»¨í…Œì´ë„ˆ ëª©ë¡ ì¡°íšŒ
docker start (id ì˜ ì¼ë¶€) : ìƒì„±ëœ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker create mysql : ë§Œì•½ mysql ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´ ìë™ìœ¼ë¡œ ë‹¤ìš´ë°›ì•„ì¤Œ
```
ì‹¤í–‰ í›„ ë‹¤ì‹œ docker ps -a ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œ
![image](https://github.com/user-attachments/assets/307fc7e9-64eb-4eac-b101-1cec1e4b5cbd)

```
docker run __ : docker create __ ì™€ docker start ëª…ë ¹ì–´ë¥¼ í•œë²ˆì— í•´ì£¼ëŠ” ëª…ë ì–´
```
í•´ë‹¹ ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œ foreground ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ëª…ë ¹ì–´ ì…ë ¥ í›„ ë‹¤ë¥¸ ëª…ë ¹ì–´ ì…ë ¥ì´ ì•ˆë¨.

âœ…foreground(í¬ê·¸ë¼ìš´ë“œ) : ë‚´ê°€ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œê·¸ë¨ì˜ ë‚´ìš©ì´ í™”ë©´ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ì¶œë ¥ë˜ëŠ” ìƒíƒœ

âœ…background(ë°±ê·¸ë¼ìš´ë“œ) : ë‚´ê°€ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œê·¸ë¨ì´ ì»´í“¨í„° ë‚´ë¶€ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ìƒíƒœ

```
docker run -d nginx : ë°±ê·¸ë¼ìš´ë“œë¡œ ì‹¤í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ì–´
docker run -d --name my-web-server nginx : my-web-server ë¼ëŠ” ì»¨í…Œì´ë„ˆ ì´ë¦„ìœ¼ë¡œ ì‹¤í–‰
```
nginx ë¥¼ up í–ˆëŠ”ë°ë„ ë¶ˆêµ¬í•˜ê³  localhost ë¼ê³  ì…ë ¥í•˜ë©´ ì‚¬ì´íŠ¸ì— ì—°ê²°í•  ìˆ˜ ì—†ìŒì´ ë‚˜ì˜¨ë‹¤.

í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°ì˜ ë„¤íŠ¸ì›Œí¬ì™€ ì»¨í…Œì´ë„ˆì˜ ë„¤íŠ¸ì›Œí¬ê°€ ë¶„ë¦¬ê°€ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ ì ‘ê·¼ì„ ëª»í•œë‹¤.

ê·¸ë˜ì„œ í˜¸ìŠ¤íŠ¸ í¬íŠ¸(ë‚˜ì˜ ë¡œì»¬)ì™€ ì»¨í…Œì´ë„ˆ í¬íŠ¸ë¥¼ ì—°ê²°í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤
```
docker run -d -p 4001(í˜¸ìŠ¤íŠ¸ í¬íŠ¸):80(ì»¨í…Œì´ë„ˆ í¬íŠ¸) nginx
```
![image](https://github.com/user-attachments/assets/19706335-8d1a-4ccf-bb9b-b8cd909e682d)

---
2-3 ì»¨í…Œì´ë„ˆ ì¡°íšŒ/ì¤‘ì§€/ì‚­ì œ
```
docker ps : ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆë§Œ ì¡°íšŒ
docker ps -a : ëª¨ë“  ì»¨í…Œì´ë„ˆ ì¡°íšŒ
docker kill idì˜ ì¼ë¶€ë¶„ : docker stop ì€ ì•ˆì „í•œ ì¢…ë£Œ ë°©ë²•, docker kill ì€ ê°•ì œ ì¤‘ì§€
docker rm $(docker ps -qa) : ì¤‘ì§€ë˜ì–´ ìˆëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker rm -f idì˜ ì¼ë¶€ë¶„ : ì‹¤í–‰ë˜ê³  ìˆëŠ” ì»¨í…Œì´ë„ˆ ì‚­ì œ
```
---
2-4 ì»¨í…Œì´ë„ˆ ë¡œê·¸ ì¡°íšŒ
```
docker logs idì˜ ì¼ë¶€ë¶„ : í•´ë‹¹ ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ ì¡°íšŒ
docker logs --tail 10 idì˜ ì¼ë¶€ë¶„ : í•´ë‹¹ ì»¨í…Œì´ë„ˆ ë¡œê·¸ì˜ 10ì¤„ ì¡°íšŒ
docker logs -f idì˜ ì¼ë¶€ë¶„ : ì‹¤ì‹œê°„ìœ¼ë¡œ ë°œìƒë˜ëŠ” ë¡œê·¸ ì¡°íšŒ
docker logs --tail 0 -f idì˜ ì¼ë¶€ë¶„ : ì´ì „ ë¡œê·¸ëŠ” ì¡°íšŒì•ˆí•˜ê³ , ëª…ë ¹ì–´ ë‹¤ìŒë¶€í„° ë“¤ì–´ì˜¤ëŠ” ë¡œê·¸ ì¡°íšŒ
```
---
2-5 ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì ‘ì†í•˜ê¸° (exec -it)
```
docker exec -it idì˜ ì¼ë¶€ë¶„ bash : ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ë¡œ ì ‘ì†
exit : ì»¨í…Œì´ë„ˆì—ì„œ ë‚˜ì˜¤ê¸°
```
![image](https://github.com/user-attachments/assets/73713df5-f031-4651-a0f2-049f42830e75)

---
2-6 Docker ì „ì²´ íë¦„ ë‹¤ì‹œ ëŠê»´ë³´ê¸° (Nginx ì„¤ì¹˜ ë° ì‹¤í–‰)

---
2-7 Docker ë¡œ Redis ì‹¤í–‰ì‹œì¼œë³´ê¸°
```
docker run -d -p 6379:6379 redis : redis ê¸°ë³¸ í¬íŠ¸ë¡œ ì‹¤í–‰ì‹œí‚¤ê¸°
redis-cli : redis ì ‘ì†
```
![image](https://github.com/user-attachments/assets/d91f6012-317b-4132-91a1-6e724a6da442)

---
### ğŸ’§ Docker Volume ì„ í™œìš©í•´ ë°ì´í„° ìœ ì‹¤ ë°©ì§€ í•˜ê¸°
3-1 Docekr Volume 

âœ… ì»¨í…Œì´ë„ˆê°€ ê°€ì§„ ë¬¸ì œì 

Dockerë¥¼ í™œìš©í•˜ë©´ íŠ¹ì • í”„ë¡œê·¸ë¨ì„ ì»¨í…Œì´ë„ˆë¡œ ë„ìš¸ ìˆ˜ ìˆë‹¤. ì´ í”„ë¡œê·¸ë¨ì— ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ë©´ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼

ë§Œë“¤ì–´ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ì‹œì¼œì•¼ í•œë‹¤. ì´ ë•Œ, DockerëŠ” ê¸°ì¡´ ì»¨í…Œì´ë„ˆì—ì„œ ë³€ê²½ëœ ë¶€ë¶„ì„ ìˆ˜ì •í•˜ì§€ ì•Šê³ ,

ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ì–´ì„œ í†µì§¸ë¡œ ê°ˆì•„ë¼ìš°ëŠ” ë°©ì‹ìœ¼ë¡œ êµì²´ë¥¼ í•œë‹¤. ì´ê²Œ íš¨ìœ¨ì ì´ë¼ê³  ìƒê°í–ˆë˜ ê²ƒì´ë‹¤.

ì´ëŸ° íŠ¹ì§• ë•Œë¬¸ì— ê¸°ì¡´ ì»¨í…Œì´ë„ˆë¥¼ ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆë¡œ êµì²´í•˜ë©´, ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ìˆë˜ ë°ì´í„°ë„ ê°™ì´ ì‚­ì œëœë‹¤.

ë§Œì•½ ì´ ì»¨í…Œì´ë„ˆê°€ MySQL ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” Container ì˜€ë‹¤ë©´ MySQLì— ì €ì¥ëœ ë°ì´í„°ë„ ê°™ì´ ì‚­ì œí•´ë²„ë¦°ë‹¤.

ë”°ë¼ì„œ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ì €ì¥ëœ ë°ì´í„°ê°€ ì‚­ì œë˜ë©´ ì•ˆë˜ëŠ” ê²½ìš°ì—ëŠ” "ë³¼ë¥¨(Volume)" ì´ë¼ëŠ” ê°œë…ì„ í™œìš©í•´ì•¼ í•œë‹¤.

âœ… Docker Volume ì´ë€?

ë„ì»¤ì˜ ë³¼ë¥¨ì´ë€ ë„ì»¤ ì»¨í…Œì´ë„ˆì—ì„œ ë°ì´í„°ë¥¼ ì˜ì†ì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ë‹¤.

ë³¼ë¥¨ì€ ì»¨í…Œì´ë„ˆ ìì²´ì˜ ì €ì¥ ê³µê°„ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ , í˜¸ìŠ¤íŠ¸ ìì²´ì˜ ì €ì¥ ê³µê°„ì„ ê³µìœ í•´ì„œ ì‚¬ìš©í•˜ëŠ” í˜•íƒœì´ë‹¤.

âœ… ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´
```
docker run -v [í˜¸ìŠ¤íŠ¸ì˜ ë””ë ‰í† ë¦¬ ì ˆëŒ€ê²½ë¡œ]:[ì»¨í…Œì´ë„ˆ ë””ë ‰í† ë¦¬ì˜ ì ˆëŒ€ê²½ë¡œ] [ì´ë¯¸ì§€ëª…]:[íƒœê·¸ëª…]
```
- [í˜¸ìŠ¤íŠ¸ì˜ ë””ë ‰í† ë¦¬ ì ˆëŒ€ ê²½ë¡œ] ì— ë””ë ‰í† ë¦¬ê°€ ì´ë¯¸ ì¡´ì¬í•  ê²½ìš°, í˜¸ìŠ¤íŠ¸ì˜ ë””ë ‰í† ë¦¬ê°€ ì»¨í…Œì´ë„ˆì˜ ë””ë ‰í† ë¦¬ë¥¼ ë®ì–´ ì”Œìš´ë‹¤.
- [í˜¸ìŠ¤íŠ¸ì˜ ë””ë ‰í† ë¦¬ ì ˆëŒ€ ê²½ë¡œ] ì•  ë””ë ‰í† ë¦¬ê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš°, í˜¸ìŠ¤íŠ¸ì˜ ë””ë ‰í† ë¦¬ ì ˆëŒ€ ê²½ë¡œì— ë””ë ‰í† ë¦¬ë¥¼ ìƒˆë¡œ ë§Œë“¤ê³  ì»¨í…Œì´ë„ˆì˜ ë””ë ‰í† ë¦¬ì— ìˆëŠ” íŒŒì¼ë“¤ì„ í˜¸ìŠ¤íŠ¸ì˜ ë””ë ‰í† ë¦¬ë¡œ ë³µì‚¬í•´ì˜¨ë‹¤.

---
3-2 Dockerë¡œ MySQL ì‹¤í–‰ì‹œì¼œë³´ê¸°
```
docker run -p 3306:3306 -d mysql : mysql ì‹¤í–‰í•˜ê¸° -> docker ps ì‹œ ì‹¤í–‰x
docker run -e MYSQL_ROOT_PASSWORD=1234 -d -p 3306:3306 mysql : mysql ì‹¤í–‰í•˜ê¸° -> docker ps ì‹¤í–‰o
```
-e : í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒ

![image](https://github.com/user-attachments/assets/4326467f-013d-42d7-83d5-4d5e60804eea)

í™˜ê²½ë³€ìˆ˜ ì„¸íŒ…ëœ ê²ƒ í™•ì¸í•˜ê¸°

```
ì»¨í…Œì´ë„ˆ ì»´í“¨í„°ì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì‹¶ì€ ë””ë ‰í† ë¦¬ë¡œ ì´ë™ ë° ìƒˆ ë””ë ‰í† ë¦¬ ìƒì„±
cd Users/User/Downloads
mkdir docker-mysql : ë””ë ‰í† ë¦¬ ìƒì„±
cd docker-mysql : í•´ë‹¹ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
í˜¸ìŠ¤íŠ¸ì˜ ê²½ë¡œë¥¼ ë¹Œë ¤ì„œ ì»¨í…Œì´ë„ˆì— ì €ì¥ëœ ë°ì´í„°ëŠ” ë‚¨ì•„ìˆë‹¤.
docker run -e MYSQL_ROOT_PASSWORD=1234 -d -p 3306:3306 -v /Users/User/Downloads/docker-mysql/mysql-data:/var/lib/mysql mysql
```
2025-05-04 ìœ„ì˜ ë°©ë²•ìœ¼ë¡œ ë³¼ë¥¨ìƒì„±í•˜ë‹ˆ ê¶Œí•œ ì˜¤ë¥˜ ë°œìƒ
![image](https://github.com/user-attachments/assets/11be6e4f-f5d3-4884-b580-559b70da7e1b)

â— Permission deniedê°€ ê³„ì† ë°œìƒí•˜ëŠ” ì´ìœ 
Windows ê²½ë¡œ(C:/Users/...)ë¥¼ ë§ˆìš´íŠ¸í–ˆì„ ë•Œ MySQL ì»¨í…Œì´ë„ˆê°€ ë‚´ë¶€ì ìœ¼ë¡œ chown -R mysql:mysql /var/lib/mysqlì„ ìˆ˜í–‰í•˜ëŠ”ë°, Windows NTFSëŠ” ë¦¬ëˆ…ìŠ¤ì˜ chownì„ í—ˆìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ì‹¬ì§€ì–´ ì‚¬ìš©ì ë””ë ‰í„°ë¦¬(C:/Users/...)ë„ ì˜ˆì™¸ëŠ” ì•„ë‹™ë‹ˆë‹¤.

ê²°ë¡ :

âœ… ì´ ë¬¸ì œëŠ” í•´ê²°í•  ìˆ˜ ìˆëŠ” ê²Œ ì•„ë‹ˆë¼ êµ¬ì¡°ì ì¸ ì œí•œì…ë‹ˆë‹¤.
```
docker volume create mysql-data

docker run -e MYSQL_ROOT_PASSWORD=password123 \
  -p 3306:3306 \
  -v mysql-data:/var/lib/mysql \
  -d --name my-mysql \
  mysql:8.0
```

â“ ê·¸ëŸ°ë° Docker Volumeì´ë©´ "í˜¸ìŠ¤íŠ¸ ì–´ë””ì— ì €ì¥ë˜ëŠ”ì§€" ëª¨ë¥¸ë‹¤?
ë§ìŠµë‹ˆë‹¤. Docker Volumeì€ ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ìˆ¨ê²¨ì§„ ìœ„ì¹˜ì— ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
í•˜ì§€ë§Œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ğŸ” Docker Volume ì‹¤ì œ ìœ„ì¹˜ í™•ì¸ë²• (WSL2 ê¸°ì¤€)
volume ìœ„ì¹˜ í™•ì¸: docker volume inspect mysql-data

ìœ„ì˜ ë°©ë²•ìœ¼ë¡œ ë„ì»¤ë³¼ë¥¨ ìƒì„± í›„ í™•ì¸
database ìƒì„±

![image](https://github.com/user-attachments/assets/cca7a5f7-0a39-4b4f-9a08-c82af967e8b0)

docker ì œê±°

![image](https://github.com/user-attachments/assets/d7e29af0-bbcf-49a6-88a9-d5551593ff3f)

docker ì¬ìƒì„±

![image](https://github.com/user-attachments/assets/32f5745d-0e91-4dd3-8f7e-9a3173eb2b9c)

database ê·¸ëŒ€ë¡œ ìˆëŠ”ì§€ í™•ì¸

![image](https://github.com/user-attachments/assets/9fc6b6df-fc22-49c0-ad46-b69db83e9b03)

âš ï¸ ë³¼ë¥¨ ìµœì´ˆ ìƒì„± í›„ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•´ì„œ ì‹¤í–‰í•˜ë©´, ë®ì–´ì“°ê¸°ê°€ ì•ˆë˜ê¸° ë•Œë¬¸ì— ë³€ê²½ëœ ë¹„ë°€ë²ˆí˜¸ë¡œ mysql ì ‘ê·¼ ì‹œ ì ‘ê·¼ ì•ˆë¨
âš ï¸ ê¸°ì¡´ì— í´ë”ë¥¼ ë§Œë“¤ì–´ ë†“ê³  ë³¼ë¥¨ì„ ìƒì„±í•œë‹¤ë©´ docker run ì´ ë˜ì§ˆ ì•ŠëŠ”ë‹¤. (í˜¸ìŠ¤íŠ¸ì˜ ì €ì¥ê³µê°„ìœ¼ë¡œ ë®ì–´ì”Œì›Œì§€ê¸° ë•Œë¬¸ì—)

---
3-3 Dockerë¡œ PostgreSQL ì‹¤í–‰ì‹œì¼œë³´ê¸°
```
mkdir C:\docker-postgresql
cd C:\docker-postgresql
docker run -e POSTGRES_PASSWORD=psssword123 -p 5432:5432 -v "C:\docker-postgresql\postgresql-data:/var/lib/postgresql/data" -d postgres
```
![image](https://github.com/user-attachments/assets/5b1b845b-e011-47da-8d09-a2d1cdb2b6e7)

---
3-4 Dockerë¡œ MongoDB ì‹¤í–‰ì‹œì¼œë³´ê¸°
```
mkdir docker-mongodb
cd .\docker-mongodb\
docker run -e MONGO_INITDB_ROOT_USERNAME=root -e MONGO_INITDB_ROOT_PASSWORD=password123 -p 27017:27017 -v "C:\docker-mongodb\mongodb-data:/data/db" -d mongo
```
![image](https://github.com/user-attachments/assets/1a159daa-ca1d-410e-8cd8-29780710b508)

### ğŸ” Dockerfile í™œìš©í•´ ì´ë¯¸ì§€ ì§ì ‘ ë§Œë“¤ê¸°
4-1 Dockerfile ì´ë€?
> Dockerfile ì´ë¼ëŠ” ê±¸ í™œìš©í•´ì„œ Docker ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ë‚´ê°€ ë§Œë“  Spring boot í”„ë¡œì íŠ¸ê°€ ìˆë‹¤. ë‚´ê°€ ë§Œë“  Spring boot í”„ë¡œì íŠ¸ ìì²´ë¥¼ Docker ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê³  ì‹¶ì„ ìˆ˜ ìˆë‹¤.
ì´ëŸ´ ë•Œì—ë„ Dockerfileì„ í™œìš©í•˜ë©´ ë‚˜ë§Œì˜ Docker ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê²Œ ëœë‹¤.

---
4-2 FROM : ë² ì´ìŠ¤ ì´ë¯¸ì§€ ìƒì„±

âœ…Â ì˜ë¯¸

`FROM`ì€ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì„ í•œë‹¤. Docker ì»¨í…Œì´ë„ˆë¥¼ **íŠ¹ì • ì´ˆê¸° ì´ë¯¸ì§€**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶”ê°€ì ì¸ ì…‹íŒ…ì„ í•  ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ ì–˜ê¸°í•œ â€˜íŠ¹ì • ì´ˆê¸° ì´ë¯¸ì§€â€™ê°€ ê³§ **ë² ì´ìŠ¤ ì´ë¯¸ì§€**ì´ë‹¤. 

> ì¡°ê¸ˆ ë” ì‰½ê²Œ ì„¤ëª…í•´ë³´ê² ë‹¤.
> 

ìš°ë¦¬ê°€ ìœˆë„ìš° ì»´í“¨í„°ë¥¼ ìƒˆë¡œ ì‚¬ì„œ ì‹¤í–‰ì‹œì¼œë³´ë©´ ê¸°ë³¸ í”„ë¡œê·¸ë¨ë“¤(ì¸í„°ë„·, ê·¸ë¦¼íŒ, ë©”ëª¨ì¥ ë“±)ì´ ë§ì´ ê¹”ë ¤ìˆë‹¤. ë² ì´ìŠ¤ ì´ë¯¸ì§€ë„ ì´ì™€ ë˜‘ê°™ë‹¤. ì»¨í…Œì´ë„ˆë¥¼ ìƒˆë¡œ ë„ì›Œì„œ ë¯¸ë‹ˆ ì»´í“¨í„° í™˜ê²½ì„ êµ¬ì¶•í•  ë•Œ ê¸°ë³¸ í”„ë¡œê·¸ë¨ì´ ì–´ë–¤ê²Œ ê¹”ë ¤ìˆìœ¼ë©´ ì¢‹ê² ëŠ” ì§€ ì„ íƒí•˜ëŠ” ì˜µì…˜ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤. 

ëˆ„êµ°ê°€ëŠ” JDKê°€ ê¹”ë ¤ìˆëŠ” ì»´í“¨í„° í™˜ê²½ì´ ì…‹íŒ…ë˜ê¸°ë¥¼ ë°”ë„ ìˆ˜ë„ ìˆê³ , ëˆ„êµ°ê°€ëŠ” Nodeê°€ ê¹”ë ¤ìˆëŠ” ì»´í“¨í„° í™˜ê²½ì´ ì…‹íŒ…ë˜ê¸°ë¥¼ ë°”ë„ ìˆ˜ë„ ìˆë‹¤. í•„ìš”ì— ë”°ë¼ ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ê³ ë¥´ë©´ ëœë‹¤. 

âœ…Â ì‚¬ìš©ë²•

```docker
# ë¬¸ë²•
FROM [ì´ë¯¸ì§€ëª…]
FROM [ì´ë¯¸ì§€ëª…]:[íƒœê·¸ëª…]
```

- `íƒœê·¸ëª…`ì„ ì ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ ì´ë¯¸ì§€ì˜ ìµœì‹ (latest) ë²„ì „ì„ ì‚¬ìš©í•œë‹¤.

---
4-3 [ì‹¤ìŠµ] FROM : ë² ì´ìŠ¤ ì´ë¯¸ì§€ ìƒì„±
![image](https://github.com/user-attachments/assets/2f2078ce-5903-4188-9a25-cdde21243ab3)

-t : ë„ì»¤ ì´ë¯¸ì§€ ì´ë¦„ ì„¤ì • (my-jdk17-server)
. : ìƒëŒ€ê²½ë¡œì—ì„œ ë„ì»¤ ë¹Œë“œ ì‹¤í–‰

![image](https://github.com/user-attachments/assets/c8899361-8538-41ee-b228-c7f352cdeb8b)

ì´ë¯¸ì§€ ë¹Œë“œ í›„ í™•ì¸

```
docker build -t my-jdk17-server:beta . : ë²„ì „ ì„¤ì •
```
![image](https://github.com/user-attachments/assets/56461ce2-e88c-4a02-8327-b5549bc1492f)

docker run -d my-jdk17-server ì‹¤í–‰ ì‹œ docker ps ì— up ëœ ì»¨í…Œì´ë„ˆê°€ ì—†ë‹¤

-> Dockerfile ì— ì˜¬ë ¤ë†“ì€ ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì¢…ë£Œë˜ê¸° ë•Œë¬¸! == Dockerfile ì— ë‚´ìš©ì´ ì—†ê¸° ë•Œë¬¸!

- docker exec -it idì˜ ì¼ë¶€ë¶„ bash : up ëœ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ë§Œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì‚¬ìš©ë¶ˆê°€

Dockerfile
```
FROM openjdk:17-jdk

...

ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # 500ì´ˆ ë™ì•ˆ ì‹œìŠ¤í…œì„ ì¼ì‹œì •ì§€ ì‹œí‚¤ëŠ” ëª…ë ¹ì–´
```

ìœ„ì²˜ëŸ¼ ì‘ì„±í•´ì£¼ê³  ë‹¤ì‹œ ë¹Œë“œ -> ëŸ° í•´ì£¼ë©´ docker exec -it idì˜ ì¼ë¶€ë¶„ bash ëª…ë ¹ì–´ ì‚¬ìš©ê°€ëŠ¥

![image](https://github.com/user-attachments/assets/a2f0a0cf-32e4-4577-b836-e1f0f8a8ed38)

ì‹¤ì œë¡œ ë‚´ê°€ ë§Œë“  ì´ë¯¸ì§€ì— ìë°” 17 ì´ ìˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥

---
4-4 COPY : íŒŒì¼ ë³µì‚¬(ì´ë™)

âœ…Â ì˜ë¯¸

`COPY`ëŠ” **í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°**ì— ìˆëŠ” íŒŒì¼ì„ ë³µì‚¬í•´ì„œ **ì»¨í…Œì´ë„ˆ**ë¡œ ì „ë‹¬í•œë‹¤.

âœ…Â ì‚¬ìš©ë²•

```docker
# ë¬¸ë²•
COPY [í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°ì— ìˆëŠ” ë³µì‚¬í•  íŒŒì¼ì˜ ê²½ë¡œ] [ì»¨í…Œì´ë„ˆì—ì„œ íŒŒì¼ì´ ìœ„ì¹˜í•  ê²½ë¡œ]

# ì˜ˆì‹œ
COPY app.txt /app.txt
```

ğŸ¯Â íŒŒì¼ ë³µì‚¬í•´ë³´ê¸°

1. **app.txt íŒŒì¼ ë§Œë“¤ê¸°**

1. **Dockerfile ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ ìƒì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
    
    **Dockerfile**
    
    ```bash
    FROM ubuntu
    
    COPY app.txt(í˜¸ìŠ¤íŠ¸ ì»´í“¨í„°) /app.txt(ì»¨í…Œì´ë„ˆ ì»´í“¨í„°)
    
    ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # ë””ë²„ê¹…ìš© ì½”ë“œ
    ```
    
    ```bash
    $ docker build -t my-server .
    $ docker run -d my-server
    $ docker exec -it [Container ID] bash
    
    $ ls
    ```
    ![image](https://github.com/user-attachments/assets/ba143497-0167-44b3-b282-9ee1df2376d0)


ğŸ¯Â í´ë” ì•ˆì— ìˆëŠ” ëª¨ë“  íŒŒì¼ë“¤ ë³µì‚¬

1. **`my-app` ë””ë ‰í„°ë¦¬ ë§Œë“¤ê¸°, `my-app` ë””ë ‰í„°ë¦¬ ì•ˆì— íŒŒì¼ ë§Œë“¤ê¸°**
    
    
2. **Dockerfile ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ ìƒì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
    
    **Dockerfile**
    
    ```bash
    FROM ubuntu
    
    COPY my-app /my-app/
    
    ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # ë””ë²„ê¹…ìš© ì½”ë“œ
    ```
    
    ```bash
    $ docker build -t my-server .
    $ docker run -d my-server
    $ docker exec -it [Container ID] bash
    
    $ ls
    ```
    ![image](https://github.com/user-attachments/assets/de84dad9-09ab-4646-a3ff-e6f84de66013)


ğŸ¯Â ì™€ì¼ë“œ ì¹´ë“œ ì‚¬ìš©í•´ë³´ê¸°

1. `app.txt`, `readme.txt` íŒŒì¼ 2ê°œ ë§Œë“¤ê¸°

1. **Dockerfile ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ ìƒì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
    
    **Dockerfile**
    
    ```bash
    FROM ubuntu
    
    COPY *.txt /text-files/
    
    ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # ë””ë²„ê¹…ìš© ì½”ë“œ
    ```
    
    - **ì£¼ì˜)** `/text-files`ë¼ê³  ì ìœ¼ë©´ ì•ˆ ë˜ê³  `/text-files/`ë¼ê³  ì ì–´ì•¼ `text-files`ë¼ëŠ” ë””ë ‰í† ë¦¬ ì•ˆì— íŒŒì¼ë“¤ì´ ì •ìƒì ìœ¼ë¡œ ë³µì‚¬ëœë‹¤.

```bash
$ docker build -t my-server .
$ docker run -d my-server
$ docker exec -it [Container ID] bash

$ ls
```

ğŸ¯Â `.dockerignore` ì‚¬ìš©í•´ë³´ê¸°

> íŠ¹ì • íŒŒì¼ ë˜ëŠ” í´ë”ë§Œ `COPY`ë¥¼ í•˜ê³  ì‹¶ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤. ê·¸ëŸ´ ë•Œ `.dockerignore`ë¥¼ í™œìš©í•œë‹¤.
> 
1. **`.dockerignore` íŒŒì¼ ë§Œë“¤ê¸°**
    
    **.dockerignore**
    
    ```bash
    readme.txt
    ```
    
2. **Dockerfile ë§Œë“¤ì–´ì„œ ì´ë¯¸ì§€ ìƒì„± ë° ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
    
    **Dockerfile**
    
    ```bash
    FROM ubuntu
    
    COPY ./ /
    
    ENTRYPOINT ["/bin/bash", "-c", "sleep 500"] # ë””ë²„ê¹…ìš© ì½”ë“œ
    ```
    

```bash
$ docker build -t my-server .
$ docker run -d my-server
$ docker exec -it [Container ID] bash

$ ls
```
---

4-5 ENTRYPOINT : ì»¨í…Œì´ë„ˆê°€ ì‹œì‘í•  ë•Œ ì‹¤í–‰ë˜ëŠ” ëª…ë ¹ì–´

âœ… ì˜ë¯¸

ENTRYPOINTëŠ” ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ê³  ìµœì´ˆë¡œ ì‹¤í–‰í•  ë•Œ ìˆ˜í–‰ë˜ëŠ” ëª…ë ¹ì–´ë¥¼ ëœ»í•œë‹¤. ì‰½ê²Œ ì„¤ëª…í•˜ìë©´ ENTRYPOINTì—ëŠ” ë¯¸ë‹ˆ ì»´í“¨í„°ì˜ ì „ì›ì„ í‚¤ê³ ë‚˜ì„œ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì€ ëª…ë ¹ì–´ë¥¼ ì ìœ¼ë©´ ëœë‹¤. 

âœ… ì‚¬ìš©ë²•
ë¬¸ë²•
ENTRYPOINT [ëª…ë ¹ë¬¸...]

ì˜ˆì‹œ
ENTRYPOINT ["node", "dist/main.js"]

ğŸ¯ ì˜ˆì œ
Dockerfile

FROM ubuntu

ENTRYPOINT ["/bin/bash", "-c", "echo hello"]

$ docker build -t my-server .
$ docker run -d my-server
$ docker ps -a
$ docker logs [Container ID]

---

4-6 [ì‹¤ìŠµ] ë°±ì—”ë“œ í”„ë¡œì íŠ¸(Spring Boot) í”„ë¡œì íŠ¸ë¥¼ Dockerë¡œ ì‹¤í–‰ì‹œí‚¤ê¸°

âœ…Â ë°±ì—”ë“œ í”„ë¡œì íŠ¸(Spring Boot) í”„ë¡œì íŠ¸ë¥¼ Dockerë¡œ ì‹¤í–‰ì‹œí‚¤ê¸°

1. **í”„ë¡œì íŠ¸ ì…‹íŒ…**
    
    [start.spring.io](https://start.spring.io/)
    - Java 17 ë²„ì „ì„ ì„ íƒí•˜ì. ì•„ë˜ ê³¼ì •ì„ Java 17 ë²„ì „ì„ ê¸°ì¤€ìœ¼ë¡œ ì§„í–‰í•  ì˜ˆì •ì´ë‹¤.
    
2. **ê°„ë‹¨í•œ ì½”ë“œ ì‘ì„±**
    
    **AppController**
    
    ```java
    @RestController
    public class AppController {
      @GetMapping("/")
      public String home() {
        return "Hello, World!";
      }
    }
    ```
    
3. **Dockerfile ì‘ì„±í•˜ê¸°**
    
    **Dockerfile**
    
    ```docker
    FROM openjdk:17-jdk
    
    COPY build/libs/*SNAPSHOT.jar app.jar
    
    ENTRYPOINT ["java", "-jar", "/app.jar"]
    ```
    

1. **Spring Boot í”„ë¡œì íŠ¸ ë¹Œë“œí•˜ê¸°**
    
    ```bash
    $ ./gradlew clean build
    ```
    
2. **Dockerfileì„ ë°”íƒ•ìœ¼ë¡œ ì´ë¯¸ì§€ ë¹Œë“œí•˜ê¸°**
    
    ```bash
    $ docker build -t hello-server .
    ```
    
3. **ì´ë¯¸ì§€ê°€ ì˜ ìƒì„±ëëŠ” ì§€ í™•ì¸í•˜ê¸°**
    
    ```bash
    $ docker image ls
    ```
    
4. **ìƒì„±í•œ ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ì‹œì¼œë³´ê¸°**
    
    ```bash
    $ docker run -d -p 8080:8080 hello-server
    ```
    
5. **ì»¨í…Œì´ë„ˆ ì˜ ì‹¤í–‰ë˜ê³  ìˆëŠ” ì§€ í™•ì¸í•˜ê¸°**
    
    ```bash
    $ docker ps
    ```
    
6. [**localhost:8080](http://localhost:8080)ìœ¼ë¡œ ë“¤ì–´ê°€ë³´ê¸°**
    ![image](https://github.com/user-attachments/assets/80702ba5-12bf-4223-8f53-f30008733d2f)

    
7. **ì‹¤í–‰ì‹œí‚¨ ì»¨í…Œì´ë„ˆ ì¤‘ì§€ / ì‚­ì œí•˜ê¸°, ì´ë¯¸ì§€ ì‚­ì œí•˜ê¸°**
    
    ```bash
    $ docker stop {ì»¨í…Œì´ë„ˆ ID}
    $ docker rm {ì»¨í…Œì´ë„ˆ ID}
    $ docker image rm {ì´ë¯¸ì§€ ID}
    ```
    

âœ…Â ê·¸ë¦¼ìœ¼ë¡œ ì´í•´í•˜ê¸°
![image](https://github.com/user-attachments/assets/592b1fb2-a9e2-406e-a250-79e796f9daed)
